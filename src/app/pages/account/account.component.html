<div class="flex h-full">
    <div
        class="sticky top-0 flex flex-col h-screen gap-6 p-6 text-lg bg-black bg-opacity-50 rounded-md w-96 bg-clip-padding backdrop-filter backdrop-blur-md"
    >
        <a routerLink="/home" class="flex items-center self-center gap-4">
            <div class="w-10 h-10">
                <img
                    src="assets/svgs/key-svgrepo-com.svg"
                    class="w-full h-full transition-transform hover:rotate-180"
                    alt="logo"
                />
                <!-- <img
                    src="assets/svgs/key.svg"
                    class="w-full h-full transition-transform hover:rotate-180"
                    alt="logo"
                /> -->
            </div>
            <div class="text-2xl font-semibold">Macio Wearhouse</div>
        </a>
        <div class="border-2 border-white border-solid rounded-md"></div>
        <div class="flex flex-col justify-between h-full">
            <div class="flex flex-col gap-4">
                <a
                    routerLink="offers"
                    class="flex items-center gap-6 p-2 transition-all rounded-md hover:bg-indigo-700 opacity-80 hover:opacity-100"
                >
                    <div class="w-8 h-8">
                        <!-- <img
                            src="assets/svgs/BMW front.svg"
                            class="w-full h-full"
                            alt="car icon"
                        /> -->
                        <img
                            src="assets/svgs/car-svgrepo-com.svg"
                            class="w-full h-full"
                            alt="car icon"
                        />
                    </div>
                    <div routerLink="offers">Your offers</div>
                </a>
                <a
                    routerLink="favourites"
                    class="flex items-center gap-6 p-2 transition-all rounded-md hover:bg-indigo-700 opacity-80 hover:opacity-100"
                >
                    <div class="w-8 h-8">
                        <img
                            src="assets/svgs/bookmark-svgrepo-com.svg"
                            class="w-full h-full"
                            alt="car icon"
                        />
                    </div>
                    <div routerLink="favourites">Favourites</div>
                </a>
                <a
                    routerLink="settings"
                    class="flex items-center gap-6 p-2 transition-all rounded-md hover:bg-indigo-700 opacity-80 hover:opacity-100"
                >
                    <div class="w-9 h-9">
                        <img
                            src="assets/svgs/setting-svgrepo-com.svg"
                            class="w-full h-full"
                            alt="settings icon"
                        />
                    </div>
                    <div routerLink="settings">Settings</div>
                </a>
            </div>

            <button
                class="flex items-center gap-6 p-2 transition-all rounded-md hover:bg-indigo-700 opacity-80 hover:opacity-100"
            >
                <div class="w-8 h-8">
                    <img
                        src="assets/svgs/left-arrow-alt-svgrepo-com.svg"
                        class="w-full h-full"
                        alt="settings icon"
                    />
                </div>
                <button (click)="onLogout()">Log out</button>
            </button>
        </div>
    </div>
    <div class="w-full">
        <router-outlet></router-outlet>
    </div>
    <button
        (click)="onToggleOfferCreator()"
        class="absolute transition-transform w-14 h-14 hover:rotate-180 bottom-4 right-4"
    >
        <img
            src="assets/svgs/add-svgrepo-com.svg"
            class="w-full h-full"
            alt="plus icon"
        />
    </button>
    <!-- <button
        class="absolute p-2 transition-all bg-indigo-700 rounded-md bottom-4 right-4"
    >
        <div class="w-8 h-8">
            <img
                src="assets/svgs/add-svgrepo-com.svg"
                class="w-full h-full"
                alt="plus icon"
            />
        </div>
    </button> -->

    <!-- <button
        class="absolute flex items-center justify-between gap-10 p-2 transition-all bg-indigo-700 rounded-md bottom-4 right-4 hover:bg-indigo-600 opacity-80 hover:opacity-100"
    >
        <div class="ml-2 font-semibold">Add offer</div>
        <div class="w-8 h-8">
            <img
                src="assets/svgs/add-svgrepo-com.svg"
                class="w-full h-full"
                alt="plus icon"
            />
        </div>
    </button> -->
</div>

<div
    *ngIf="creatorOpenState"
    class="absolute flex items-center justify-center w-full h-full -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2 backdrop-blur-3xl bg-opacity-90 bg-clip-padding backdrop-filter"
>
    <div
        *ngIf="creatorLeavingPrompt"
        class="absolute z-20 flex items-center justify-center w-full h-full backdrop-brightness-30 backdrop-blur-3xl"
    >
        <div
            class="flex flex-col items-center px-24 py-12 text-center border-2 border-indigo-600 border-solid rounded-md shadow-md backdrop-brightness-200 drop-shadow-md shadow-black backdrop-blur-3xl bg-opacity-90 bg-clip-padding backdrop-filter"
        >
            <div class="w-64 h-64">
                <img
                    src="assets/svgs/mark-svgrepo-com.svg"
                    class="w-full h-full"
                    alt="danger icon"
                />
            </div>
            <div class="mb-10 text-3xl">Do you want to leave?</div>
            <div class="flex gap-2 text-xl">
                <button
                    (click)="onToggleLeavingConfirmation()"
                    class="px-6 py-2 rounded-md hover:text-indigo-700"
                >
                    Cancel
                </button>
                <button
                    (click)="onToggleOfferCreator()"
                    class="px-6 py-2 bg-indigo-700 rounded-md hover:bg-indigo-800"
                >
                    Leave
                </button>
            </div>
        </div>
    </div>

    <form
        [formGroup]="offerForm"
        (ngSubmit)="onOfferSubmit()"
        [ngClass]="{
            'w-full': creatorFullscreenState,
            'h-full': creatorFullscreenState,
        }"
        class="grid w-3/4 grid-cols-4 grid-rows-5 gap-8 px-8 pt-16 pb-8 text-center transition-all duration-500 ease-out rounded-md shadow-2xl drop-shadow-2xl shadow-black h-5/6 backdrop-blur-3xl bg-opacity-90 bg-clip-padding backdrop-filter"
    >
        <div
            class="absolute flex items-center justify-between w-full pl-6 pr-7 top-2"
        >
            <div class="flex">
                <button class="transition-all w-11 h-11 hover:scale-105">
                    <img
                        src="assets/svgs/tick-svgrepo-com.svg"
                        class="w-full h-full"
                        alt="fullscreen icon"
                    />
                </button>
                <button
                    (click)="onToggleLeavingConfirmation()"
                    class="transition-all w-11 h-11 hover:scale-105"
                >
                    <img
                        src="assets/svgs/cross-svgrepo-com(1).svg"
                        class="w-full h-full"
                        alt="close icon"
                    />
                </button>
            </div>

            <div class="text-xl font-semibold">- Offer Creator -</div>

            <button
                (click)="onToggleCreatorFullscreen()"
                class="w-8 h-8 ml-1 transition-all hover:scale-105"
            >
                <img
                    [src]="fullscreenImageSrc"
                    class="w-full h-full"
                    alt="fullscreen icon"
                />
            </button>
        </div>

        <div class="col-span-3 row-span-3">
            <label
                for="dropzone-file"
                class="flex flex-col items-center justify-center w-full h-full transition-all duration-300 ease-out rounded-md shadow-md cursor-pointer drop-shadow-md shadow-black backdrop-blur-3xl bg-opacity-90 bg-clip-padding backdrop-filter hover:shadow-sm"
            >
                <div
                    class="flex flex-col items-center justify-center pt-5 pb-6"
                >
                    <div class="w-24 h-24">
                        <img
                            src="assets/svgs/upload-svgrepo-com.svg"
                            class="w-full h-full"
                            alt="upload file icon"
                        />
                    </div>
                    <p class="mb-2">
                        <span class="font-semibold">Click to upload</span>
                        or drag and drop
                    </p>
                    <p class="opacity-60">
                        PNG, JPG or JPEG (horizontal orientation)
                    </p>
                </div>
                <input id="dropzone-file" required type="file" class="hidden" />
            </label>
        </div>

        <div class="relative col-span-3 row-span-2">
            <label
                for="description"
                class="absolute z-10 overflow-hidden -top-4 left-12"
                >Description</label
            >
            <textarea
                required
                name="description"
                id="description"
                cols="30"
                rows="10"
                class="w-full h-full px-4 py-6 text-xl rounded-md shadow-md resize-none bg-neutral-900 focus:outline focus:outline-indigo-700"
            ></textarea>
        </div>

        <div
            class="flex flex-col justify-between h-full col-start-4 row-span-full"
        >
            <div class="flex flex-col gap-6">
                <div class="flex justify-between gap-2">
                    <app-input
                        class="w-1/2"
                        label="car brand"
                        type="text"
                        [control]="offerForm.controls.carBrand"
                    ></app-input>
                    <app-input
                        class="w-1/2"
                        label="car model"
                        type="text"
                        [control]="offerForm.controls.carModel"
                    ></app-input>
                </div>
                <div class="flex justify-between gap-2">
                    <app-input
                        class="w-1/2"
                        label="gearbox type"
                        type="text"
                        [control]="offerForm.controls.gearboxType"
                    ></app-input>
                    <app-input
                        class="w-1/2"
                        label="available seats"
                        type="number"
                        [control]="offerForm.controls.availableSeats"
                    ></app-input>
                </div>
                <div class="flex justify-between gap-2">
                    <app-input
                        class="w-1/2"
                        label="fuel type"
                        type="text"
                        [control]="offerForm.controls.fuelType"
                    ></app-input>
                    <app-input
                        class="w-1/2"
                        label="production year"
                        type="number"
                        [control]="offerForm.controls.productionYear"
                    ></app-input>
                </div>

                <app-input
                    label="pickup location"
                    type="text"
                    [control]="offerForm.controls.pickupLocation"
                ></app-input>
                <div class="flex justify-between gap-2">
                    <app-input
                        class="w-1/2"
                        label="available for (days)"
                        type="number"
                        [control]="offerForm.controls.availableFor"
                    ></app-input>
                    <app-input
                        class="w-1/2 appearance-none"
                        label="price for day"
                        type="number"
                        [control]="offerForm.controls.price"
                    ></app-input>
                </div>
            </div>

            <button
                type="submit"
                [disabled]="offerForm.invalid"
                class="w-full px-2 py-4 text-xl font-semibold transition-colors bg-indigo-800 rounded-md shadow-md justify-self-end"
                [ngClass]="{
                    'hover:bg-indigo-700': offerForm.valid,
                    'cursor-not-allowed': offerForm.invalid,
                    'opacity-70': offerForm.invalid,
                }"
            >
                Submit & Add offer
            </button>
        </div>
    </form>
</div>
